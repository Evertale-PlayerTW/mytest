<!DOCTYPE html>
<html lang="zh-Hant">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			rel="icon"
			type="image/png"
			href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAC91BMVEUAAAAsIylCOj9VTlI1JyhBOTy1n5EvJCZJPEM3LjUlHR85LzhdUFU/MDInHiNBNDc6MTc1LDFWSkU/NjoZFhkeFxijfVk9LS8vJCxnW195al4uJSkyJyo/Mjc8MjgeFxwZERFCOUATERNlXV3y47F2XVRCN0Oukmbn2sBwZGQpHiHGuZQ7LCzLwalIODouJSYpICB3XkjBvKNFNDQqISKWiXaqm5UZExVmVlofGh8fFxlpUUGBe3hYUU1jXmT/6dBUPj5LNzlEMjM7KyxpTktOOjtALzBvUlFQOzx8XldFLjU0JiiFZFxHNTYxIyT++uz/5s3+4clpXWiLaF5bQkE2Jyz9893/69Lx5cv228X52sTl1b/eybOTi42gioWJfoSWdm5uY2pvYF2CYVlsWlluVExkTEpeRURXQkA9NUBoQT00LDlBLzdSNTYmIS8rICH69Obs6OPi3Nf36c/e1c7QysjOxcDEvLi5sK65pZqyi32TgH1/dnmAc3Cvd2yTb2OMbGOabWCdZ1xaTlx/XFmUZ1hRSFZkUlV6VVOIa1FeUVF2VE1iSUE4MD5HOjtjOzZkLTY3LDMkGh3+/PH49e/+/OT++t/n4dz38Nbx6dP99tL69Mrc18Pz5cD+9r3Qybrp2rXNvbXbwrDauqjluqVdjJbx1pXYv5Kjj4/lm4zIpouumYumlYbUkIXDiXyvlHFtZm+jcmuee2qlh2izbGekbGZ9a2VgVWSNd2OdhWBzZGCHaFt9ZlR3WFSEW1OqU1J7YlGCUUpOQUd0WkWIXkNoSUNrVUKYOUF2UDwsJDRMMDA4Iyv27eDo4dLl3NLl2Mj25sXq2sLuzrr877asvLWbs7C9uaL98KG/rqHiyp6vpZ3Xxpy/rpmXhJCwm47TsYzOmoq5k4W6poSThYKUg4LcwIF+cHaNgHSGf3O6fXKbiG+pgW9/a2y3hlqocVpLRlkzS1d0XFVrWVSccEuMUUu5QkqESkhiSUcwPUdyW0ajPESUS0OJNT5j/bk9AAAAP3RSTlMA/h0L70/+8ikQ9O/st6qJal9KSC8U/fjl5OPUspx4aEg8PDT+/fz49vHx6enf39ra1s3IxK2bmI2HhIB+Y1QrMBUfAAAC80lEQVQ4y2KgMmAVVlAQZWLFIatkziftHerNIq4jKMqMRZ7Jissrx8nVwcHXyc2bF1NeUcLb2cnV0dc13cPJ14FFGV2emc/by8vZ1cOhZa+Dq5ujBwu6Q/gZ3dxcQ9xdgt3TXBzcHdKdnXlRDFECiJHRycE3w8PJ3aU+YZNLaqpvqACKAfImbq6ODsmpe7+7uFf5JO/28XC0RFHAwe7l6JDu5OZZ7+7p6b7Jx8XDWUsESZ6Tj3GiY4ijS4hncLrP6+DkFncPLwFkBaLSjKHOzhlHu4N3N3R0dNc/9HF0skD2o7ws46R8x4yQjuQlCSFZ6xbdc3F05kcNRsZJ3n6hrhP7gh2c9jWkLPZwY0ENbQFGRj+/NLalS3e5uTz48aHLyc8ANZwAEubOT/NNK54/5/mqS4FXrsY453OhxZQgl2uLY3RYcXS4vb19QMwkb1YmtLDWz3fyWRxuH24fBcRr/Nit0WNLht3ZISoAqD0KiD+xGIsJgcIHyaVCcuJ+DYEBkZGRAfZsejKGKepAFXIcikihKct+qioqMBAozy3xs703Q1VQWJJVEuxCU20jO2B88Gc1bVwSGFkVmndsx6GTeZ5qPDWaPCCtUo8WTJttw8DMe+Ldy60bG1uP9a1Pyj6ZyZOYWFNbysBhBggFAfr+LaDldHGdJD0Uy0qKFq2ufrXDwLZpawtSg11fd3d1AChYlZrTT3Ccp9sakZCQarSprX6PwIaNbEaOUl1ddnZ4AFiTT57Xm3CYrLjW74ZskPy0qb/K8WmNbG1tSrZ4cpeXAFiUT5Wek3Od3GLosLC3xPv69cePiWluy8WPbYxecpRxAJnOT0+aVqamq2S6UmHme7Ptv8fIh7lrbYWBasK8oXdxAFh0VlaW0Keze1Jihnzj5Hl76rmMg2S8i9+qhYqJ2HJ2AFtc0Vtcr4lgmdpig1+feKLdqEnD7GFJwdl+gmtlq3R1AM8GXl5gxF7NcMx9Ul+YeXmhqIHz9Ie3voL2wW6MfV1fBUcTM3p5mhoAAAAASUVORK5CYII="
		/>
		<title>「亙苦妄想」花名冊</title>
		<style>
			body {
				width: min(100%, 800px);
				margin: auto;
				padding: 0.5rem;
				box-sizing: border-box;
				font-family: "Noto Sans TC", "Microsoft JhengHei", "PingFang TC", "Segoe UI", Arial, sans-serif;
			}

			a {
				color: inherit;
				text-decoration: none;
			}

			.chooseOption {
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 3px 0;
			}

			.chooseOption label {
				flex: 1;
				text-align: center;
			}

			#filterRarity,
			#filterElement,
			#filterWeaponType,
			#filterStars {
				border: 1px solid black;
				margin: 5px 0;
				padding: 5px;
				position: relative;
			}

			.toggleAll {
				position: absolute;
				top: 0;
				left: -0.4em;
				border: none;
				background: transparent;
				width: max(3%, 1em);
				height: 100%;
				padding: 0;
				font: inherit;
			}

			.toggleAll::before {
				position: absolute;
				content: "";
				top: 50%;
				left: 0;
				background-color: gray;
				border-radius: 50%;
				width: 0.8em;
				height: 1.2em;
				transform: translateY(-50%);
			}

			#targetSelect {
				width: 100%;
				height: 2em;
				margin: 10px auto;
				font-size: 1em;
				font-family: inherit;
			}

			/* Chrome, Safari, Edge */
			input[type="number"]::-webkit-outer-spin-button,
			input[type="number"]::-webkit-inner-spin-button {
				-webkit-appearance: none;
				margin: 0;
			}

			/* Firefox */
			input[type="number"] {
				appearance: textfied;
				-moz-appearance: textfield;
			}

			select {
				appearance: none;
				-webkit-appearance: none;
				-moz-appearance: none;
				text-align: center;
				text-align-last: center;
				-moz-text-align-last: center;
			}

			option:first-child {
				text-align: center;
				text-align-last: center;
				-moz-text-align-last: center;
			}

			option:not(:first-child) {
				text-align: left;
			}

			.hidden {
				display: none !important;
			}

			hr {
				margin: 1.5em -0.5em 2em -0.5em;
			}

			#nameDisplay {
				position: relative;
			}

			#bigName {
				text-align: center;
				font-size: 3em;
				font-weight: bold;
			}

			#subName {
				text-align: center;
				font-size: 1.5em;
			}

			#codeName {
				position: absolute;
				top: -4em;
				right: 0px;
				font-size: 0.5em;
			}

			#viewContent {
				padding: 0.5em;
				margin-top: 2em;
			}

			#generalStatsArea {
				width: min(100%, 400px);
				margin: auto;
				padding: 0.5rem;
				border: 1px solid black;
				box-sizing: border-box;
			}

			.infoRow {
				display: flex;
				align-items: center;
				margin: 0.3em auto;
			}

			.infoTitle {
				width: 30%;
				border: 1px solid black;
				text-align: justify;
				text-align-last: justify;
				padding: 0.2em;
			}

			.infoValue {
				width: 70%;
				text-align: center;
			}

			.areaTitle {
				text-align: center;
				font-size: 2em;
			}

			.contentBox {
				position: relative;
				border: 1px solid black;
				padding: 0.5em;
				min-height: 1.5em;
				box-sizing: border-box;
			}

			#hasAscended {
				margin-top: 1.5em;
			}

			#profileAscendedTitle {
				border: 1px solid black;
				font-size: 1.2em;
				width: 50%;
				text-align: justify;
				text-align-last: justify;
				margin: 0.5em auto;
			}

			#leaderSkillName,
			#weaponSkillName {
				border: 1px solid black;
				display: inline-block;
				margin: 0 auto 0.3em 1em;
				padding: 0 0.2em;
			}

			#activeSkillContent,
			#passiveSkillContent,
			#dialogContent,
			#relationshipContent {
				display: flex;
				flex-direction: column;
				gap: 0.5em;
			}

			.activeSkillDetail,
			.passiveSkillDetail {
				display: grid;
				grid-template-columns: 1fr minmax(10%, max-content) minmax(10%, max-content);
				align-items: center;
				border: 1px solid black;
				padding: 0.5em;
				gap: 0.4em;
			}

			.activeSkillName,
			.passiveSkillName,
			.relationshipName {
				display: inline-block;
				margin-left: 1em;
				border: 1px solid black;
				padding: 0 0.2em;
				width: fit-content;
			}

			.activeSkillSpirit,
			.activeSkillTU {
				text-align: center;
				border: 1px solid black;
				border-radius: 1em;
				height: 100%;
				place-content: center;
				padding: 0 0.5em;
			}

			.activeSkillDecription,
			.passiveSkillDecription,
			.relationshipMembers {
				grid-column: 1 / -1;
			}

			.dialogGroupTitle {
				text-align: center;
				font-size: 1.2em;
			}

			.dialogText {
				border: 1px solid black;
				margin: 0.5em auto;
				padding: 0.5em;
			}

			label:has(input:disabled) {
				opacity: 0.5;
				pointer-events: none;
				cursor: not-allowed;
			}

			.relationshipAGroup {
				display: grid;
				grid-template-columns: 1fr 5em;
				align-items: center;
				border: 1px solid black;
				padding: 0.5em;
			}

			.relationshipBonus {
				text-align: center;
				border: 1px solid black;
				border-radius: 5em;
				height: 100%;
				place-content: center;
				padding: 0 0.5em;
				line-height: 1.1;
			}

			.relationshipAGroup ul {
				margin: 0.5em 1em;
				padding-left: 0.5em;
			}

			.collapseButton {
				position: absolute;
				left: 0;
				top: -0.25rem;
				background-color: transparent;
				border: 0;
				padding: 0;
				line-height: 1;
				transform: translate(-50%, -100%);
			}

			#dataProgress {
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				text-align: center;
			}

			#selectableList {
				display: grid;
				grid-template-columns: 1fr auto;
				align-items: center;
			}
		</style>
	</head>

	<body>
		<div id="dataProgress">
			<div id="loadingReminder">載入速度取決於網路品質及伺服器連線<br />請耐心等候</div>
			<div id="languageProgress"></div>
			<div id="monsterProgress"></div>
			<div id="weaponProgress"></div>
			<div id="equipmentProgress"></div>
		</div>
		<div class="hidden" id="filterArea">
			<div class="chooseOption" id="selectCategory">
				<label
					><input type="radio" name="unit_category" value="Monster" onchange="changeCategory()" checked />角色</label
				>
				<label><input type="radio" name="unit_category" value="Weapon" onchange="changeCategory()" />武器</label>
				<label><input type="radio" name="unit_category" value="Equipment" onchange="changeCategory()" />飾品</label>
			</div>

			<div id="filterRarity">
				<button class="toggleAll" onclick="toggleAllCheckboxes(this)"></button>
				<div class="chooseOption">
					<label><input type="checkbox" value="N" onchange="setSelectableList(this)" checked />N</label>
					<label><input type="checkbox" value="R" onchange="setSelectableList(this)" checked />R</label>
					<label><input type="checkbox" value="SR" onchange="setSelectableList(this)" checked />SR</label>
					<label><input type="checkbox" value="SSR" onchange="setSelectableList(this)" checked />SSR</label>
				</div>
			</div>

			<div id="filterStars">
				<button class="toggleAll" onclick="toggleAllCheckboxes(this)"></button>
				<div class="chooseOption">
					<label><input type="checkbox" value="0" onchange="setSelectableList(this)" checked />0★</label>
					<label><input type="checkbox" value="1" onchange="setSelectableList(this)" checked />1★</label>
					<label><input type="checkbox" value="2" onchange="setSelectableList(this)" checked />2★</label>
					<label><input type="checkbox" value="3" onchange="setSelectableList(this)" checked />3★</label>
					<label><input type="checkbox" value="4" onchange="setSelectableList(this)" checked />4★</label>
					<label><input type="checkbox" value="5" onchange="setSelectableList(this)" checked />5★</label>
					<label><input type="checkbox" value="6" onchange="setSelectableList(this)" checked />6★</label>
				</div>
			</div>

			<div id="filterElement" class="mo">
				<button class="toggleAll" onclick="toggleAllCheckboxes(this)"></button>
				<div class="chooseOption">
					<label><input type="checkbox" value="Fire" onchange="setSelectableList(this)" checked />火</label>
					<label><input type="checkbox" value="Water" onchange="setSelectableList(this)" checked />水</label>
					<label><input type="checkbox" value="Earth" onchange="setSelectableList(this)" checked />地</label>
					<label><input type="checkbox" value="Air" onchange="setSelectableList(this)" checked />雷</label>
					<label><input type="checkbox" value="Life" onchange="setSelectableList(this)" checked />光</label>
					<label><input type="checkbox" value="Death" onchange="setSelectableList(this)" checked />闇</label>
				</div>
			</div>

			<div id="filterWeaponType" class="wo" style="display: none">
				<button class="toggleAll" onclick="toggleAllCheckboxes(this)"></button>
				<div class="chooseOption" id="filterWeaponTypeYellow">
					<label><input type="checkbox" value="Sword" onchange="setSelectableList(this)" checked />單手劍</label>
					<label><input type="checkbox" value="Axe" onchange="setSelectableList(this)" checked />單手斧</label>
					<label><input type="checkbox" value="Staff" onchange="setSelectableList(this)" checked />法杖</label>
					<label><input type="checkbox" value="Mace" onchange="setSelectableList(this)" checked />釘頭鎚</label>
				</div>

				<div class="chooseOption" id="filterWeaponTypeRed">
					<label><input type="checkbox" value="GreatSword" onchange="setSelectableList(this)" checked />雙手劍</label>
					<label><input type="checkbox" value="GreatAxe" onchange="setSelectableList(this)" checked />雙手斧</label>
					<label><input type="checkbox" value="Spear" onchange="setSelectableList(this)" checked />長槍</label>
					<label><input type="checkbox" value="Hammer" onchange="setSelectableList(this)" checked />大槌</label>
					<label><input type="checkbox" value="Katana" onchange="setSelectableList(this)" checked />武士刀</label>
				</div>
			</div>

			<div id="selectableList">
				<select id="targetSelect" onchange="displayData()">
					<option value="" disabled selected hidden>▼ 選擇目標 ▼</option>
				</select>
				<label><input type="checkbox" id="reverseToggle" onchange="reverseOptions()" value="false" />反序</label>
			</div>
		</div>
		<hr style="margin-top: 1em" />
		<div id="nameDisplay">
			<div id="subName"></div>
			<div id="bigName"></div>
			<div id="codeName"></div>
		</div>

		<div id="viewContent">
			<div class="hidden" id="generalStatsArea">
				<div class="infoRow hidden" id="rarity">
					<div class="infoTitle">稀有度</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="stars">
					<div class="infoTitle">星數</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="preferredWeapon">
					<div class="infoTitle">擅長武器</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="weaponType">
					<div class="infoTitle">武器類型</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="element">
					<div class="infoTitle">屬性</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="cost">
					<div class="infoTitle" style="text-align: center; text-align-last: center">Cost</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="atk">
					<div class="infoTitle">攻擊力</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="hp">
					<div class="infoTitle">生命</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="speed">
					<div class="infoTitle">速度</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="power">
					<div class="infoTitle">
						<div>戰力</div>
						<div id="powerHint" style="text-align: center; text-align-last: center; font-size: 0.7em">
							(基礎能力值估算)
						</div>
					</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="freeEvo">
					<div class="infoTitle">自動進化</div>
					<div class="infoValue"></div>
				</div>
				<div class="infoRow hidden" id="visible">
					<div class="infoTitle">圖鑑可見</div>
					<div class="infoValue"></div>
				</div>
			</div>

			<div class="hidden" id="gachaIntroArea">
				<hr />
				<div class="areaTitle" id="profileTitle">召喚導言</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="gachaIntroContent">
						<div id="gachaIntroText" style="text-align: center"></div>
					</div>
				</div>
			</div>

			<div class="hidden" id="profileArea">
				<hr />
				<div class="areaTitle" id="profileTitle">簡介</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="profileContent">
						<div id="profileText"></div>
					</div>
				</div>
			</div>

			<div class="hidden" id="leaderSkillArea">
				<hr />
				<div class="areaTitle" id="leaderSkillTitle">隊長技能</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="leaderSkillContent">
						<div id="leaderSkillName"></div>
						<div id="leaderSkillDecription"></div>
					</div>
				</div>
			</div>

			<div class="hidden" id="weaponSkillArea">
				<hr />
				<div class="areaTitle" id="weaponSkillTitle">武器技能</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="weaponSkillContent">
						<div id="weaponSkillName"></div>
						<div id="weaponSkillDecription"></div>
					</div>
				</div>
			</div>

			<div class="hidden" id="activeSkillArea">
				<hr />
				<div class="areaTitle" id="activeSkillTitle">主動技能</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="activeSkillContent"></div>
				</div>
			</div>

			<div class="hidden" id="passiveSkillArea">
				<hr />
				<div class="areaTitle" id="passiveSkillTitle">被動技能</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="passiveSkillContent"></div>
				</div>
			</div>

			<div class="hidden" id="summonableMonstersArea">
				<hr />
				<div class="areaTitle" id="summonableMonstersTitle">召喚物</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="summonableMonstersContent"></div>
				</div>
			</div>

			<div class="hidden" id="dialogArea">
				<hr />
				<div class="areaTitle" id="dialogTitle">對話</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="dialogContent"></div>
				</div>
			</div>

			<div class="hidden" id="aiLogicArea">
				<hr />
				<div class="areaTitle" id="aiLogicTitle">AI邏輯</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="aiLogicContent" style="white-space: pre-wrap"></div>
				</div>
			</div>

			<div class="hidden" id="relationshipArea">
				<hr />
				<div class="areaTitle" id="relationshipTitle">夥伴</div>
				<div class="contentBox">
					<button class="collapseButton" onclick="collapseContent(this)">⊖</button>
					<div id="relationshipContent"></div>
				</div>
			</div>
		</div>

		<template id="template-hasAscended">
			<div id="hasAscended">
				<div id="profileAscendedTitle">・超越・</div>
				<div id="profileAscendedText"></div>
			</div>
		</template>

		<template id="template-activeSkill">
			<div class="activeSkillDetail">
				<div class="activeSkillName"></div>
				<div class="activeSkillSpirit"></div>
				<div class="activeSkillTU"></div>
				<div class="activeSkillDecription"></div>
			</div>
		</template>

		<template id="template-passiveSkill">
			<div class="passiveSkillDetail">
				<div class="passiveSkillName"></div>
				<div></div>
				<div></div>
				<div class="passiveSkillDecription"></div>
			</div>
		</template>

		<template id="template-dialog">
			<div class="dialogGroup">
				<div class="dialogGroupTitle"></div>
				<div class="dialogText"></div>
			</div>
		</template>

		<template id="template-relationship">
			<div class="relationshipAGroup">
				<div class="relationshipName"></div>
				<div class="relationshipBonus"></div>
				<div class="relationshipMembers"></div>
			</div>
		</template>

		<script src="JavaScript\FilterLogic.js"></script>
		<script src="JavaScript\LoadData.js"></script>
		<script src="JavaScript\InfoDisplay.js"></script>
		<script>
			let unit_category = document.querySelector('input[name="unit_category"]:checked').value;
			let currentDisplayCategory = null;
			let wholeData = {};

			document.addEventListener("DOMContentLoaded", initPage());

			async function initPage() {
				await initFilter();
				await loadWholeData();
				await setSelectableList();
				await analyzeUrlParams();
			}
		</script>
	</body>
</html>
